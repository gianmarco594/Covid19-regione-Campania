<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8" />
    <title>Covid regione Campania</title>
    <meta name="author" content="Gianmarco Beato, Angela Vecchione, Alfonso Golino" />
    <meta name="description" content="progetto basi di dati 12 - Covid19 Regione Campania" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./assets/styles/jquery-jvectormap-2.0.5.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="./assets/styles/main_style.css" tyoe="text/css" />
    <link rel="shortcut icon" href="./assets/images/favicon.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="./javascript_client/jquery-jvectormap-2.0.5.min.js"></script>
    <script src="./javascript_client/jquery-jvectormap-it-merc.js"></script>
    <script defer src="./javascript_client/main.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <noscript>Questa pagina richiede javascript</noscript>
    
    <div class="header">
        <div class="header_flex">
            <img src="./assets/images/coronaviruslogo.png" alt="coronaviruslogo" />
            <h3>CORONAVIRUS REGIONE CAMPANIA</h3>
        </div>
    </div>

    <div class="container">

        <div class="regione">
            <div id="map">
            </div>

        </div>
        <div class="row">

            <div class="square">
                <div class="data">
                    <span>Casi totali</span>
                    <div><canvas id="casi-totali"></canvas></div>
                </div>
            </div>

            <div class="square">
                <div class="data">
                    <span>Nuovi positivi</span>
                    <canvas id="nuovi-positivi"></canvas>
                </div>
            </div>

            <div class="square">
                <div class="data">
                    <span>Attualmente Positivi</span>
                    <canvas id="attualmente-positivi"></canvas>
                </div>
            </div>

        </div>

        <div class="row">

            <div class="square">
                <div class="data">
                    <span>Tamponi</span>
                    <canvas id="tamponi"></canvas>
                </div>
            </div>

            <div class="square">
                <div class="data">
                    <span>Guariti</span>
                    <canvas id="guariti"></canvas>
                </div>
            </div>

            <div class="square">
                <div class="data">
                    <span>Deceduti</span>
                    <canvas id="deceduti"></canvas>
                </div>
            </div>

        </div>

    </div>
    <script>
        var socket = io.connect('http://localhost:8080');
        socket.on("message", function (data) {
            if (data == null) { 
                alert("no"); socket.close(); 
            } else { 
                //alert(data); socket.close(); fare qualcosa con il risultato restituito dal server;
               // var risultato = JSON.parse(data[0]);
               
                //window.alert(data[1], " - ", data[2]);
                window.alert(data[0]);
            }
        });

    </script>
</body>
</html>